this topic for the zsh shell was written by a programmer from Norilsk "h1n1" around the beginning of 2022.
I am his friend (at least before) and I publish his development, without assigning the code to myself.

(do not pay attention to errors in the text)
